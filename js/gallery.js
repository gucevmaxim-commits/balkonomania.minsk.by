// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–∞–ª–µ—Ä–µ–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ
const galleryConfig = {
    folders: [
        {
            id: 'balcony-1',
            title: '–õ–æ–¥–∂–∏—è –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª–∏—Ü–∞ –ì—Ä–∏–∑–æ–¥—É–±–æ–≤–æ–π 1"',
            description: '–ü–æ–ª–Ω–∞—è –æ—Ç–¥–µ–ª–∫–∞ –ª–æ–¥–∂–∏–∏ —Å —É—Ç–µ–ø–ª–µ–Ω–∏–µ–º –∏ –º–æ–Ω—Ç–∞–∂–æ–º –º–µ–±–µ–ª–∏',
            previews: [
                'images/gallery/balcony-1/1.jpg',
                'images/gallery/balcony-1/2.jpg'
            ],
            media: [
                {
                    type: 'image',
                    url: 'images/gallery/balcony-1/1.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-1/2.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-1/3.jpg',
                    title: '–î–µ—Ç–∞–ª–∏ –æ—Ç–¥–µ–ª–∫–∏'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-1/4.jpg',
                    title: '–ì–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç'
                },
                {
                    type: 'video',
                    url: 'images/gallery/balcony-1/5.mp4',
                    title: '–í–∏–¥–µ–æ-—Ç—É—Ä –ø–æ –±–∞–ª–∫–æ–Ω—É',
                    poster: 'images/gallery/balcony-1/1.jpg'
                }
            ],
            date: '15.12.2024'
        },

        {
            id: 'balcony-2',
            title: '–ë–∞–ª–∫–æ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: –ø—Ä-–¥. –¢–∞—à–∫–µ–Ω—Å–∫–∏–π 12',
            description: '–ö–æ–º–ø–ª–µ–∫—Å —Ä–∞–±–æ—Ç: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–í–• –æ—Å—Ç–µ–∫–ª–µ–Ω–∏—è, –Ω–∞—Ä—É–∂–Ω–∞—è –æ—Ç–¥–µ–ª–∫–∞ —Å–∞–π–¥–∏–Ω–≥–æ–º, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—Ç–¥–µ–ª–∫–∞ –ª–∞–º–∏–Ω–∞—Ç–æ–º —Å —É—Ç–µ–ø–ª–µ–Ω–∏–µ–º, –º–æ–Ω—Ç–∞–∂ —à–∫–∞—Ñ–∞ –¥–æ –ø–æ—Ç–æ–ª–∫–∞',
            previews: [
                'images/gallery/balcony-2/1.jpg',
                'images/gallery/balcony-2/2.jpg'
            ],
            media: [
                {
                    type: 'image',
                    url: 'images/gallery/balcony-2/1.jpg',
                    title: '–ü–∞–Ω–æ—Ä–∞–º–Ω–æ–µ –æ—Å—Ç–µ–∫–ª–µ–Ω–∏–µ'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-2/2.jpg',
                    title: '–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –º–µ–±–µ–ª—å'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-2/3.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },{
                    type: 'image',
                    url: 'images/gallery/balcony-2/4.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-2/5.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },{
                    type: 'image',
                    url: 'images/gallery/balcony-2/6.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },{
                    type: 'image',
                    url: 'images/gallery/balcony-2/7.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },{
                    type: 'image',
                    url: 'images/gallery/balcony-2/8.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },{
                    type: 'image',
                    url: 'images/gallery/balcony-2/9.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },{
                    type: 'image',
                    url: 'images/gallery/balcony-2/10.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-2/11.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },
                 {
                    type: 'image',
                    url: 'images/gallery/balcony-2/14.jpg',
                    title: '–û—Å–≤–µ—â–µ–Ω–∏–µ'
                },
                {
                    type: 'video',
                    url: 'images/gallery/balcony-2/12.mp4',
                    title: '–í–∏–¥–µ–æ-—Ç—É—Ä –ø–æ –±–∞–ª–∫–æ–Ω—É',
                    poster: 'images/gallery/balcony-2/1.jpg'
                },
                {
                    type: 'video',
                    url: 'images/gallery/balcony-2/13.mp4',
                    title: '–í–∏–¥–µ–æ-—Ç—É—Ä –ø–æ –±–∞–ª–∫–æ–Ω—É',
                    poster: 'images/gallery/balcony-2/1.jpg'
                }
                
            ],
            date: '08.11.2024'
        },

         {
            id: 'balcony-3',
            title: '–ë–∞–ª–∫–æ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª–∏—Ü–∞ –†–æ–∫–æ—Å—Å–æ–≤—Å–∫–æ–≥–æ 15',
            description: '–ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –æ—Å—Ç–µ–∫–ª–µ–Ω–∏—è: –¥–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç–∞—Ä—ã—Ö —Ä–∞–º, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤—É—Ö –Ω–æ–≤—ã—Ö –ü–í–• –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —Å –Ω–∞—Ä—É–∂–Ω–æ–π –æ—Ç–¥–µ–ª–∫–æ–π —Å–∞–π–¥–∏–Ω–≥–æ–º',
            previews: [
                'images/gallery/balcony-3/1.jpg',
                'images/gallery/balcony-3/2.jpg'
            ],
            media: [
                {
                    type: 'image',
                    url: 'images/gallery/balcony-3/1.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-3/2.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-3/3.jpg',
                    title: '–î–µ—Ç–∞–ª–∏ –æ—Ç–¥–µ–ª–∫–∏'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-3/4.jpg',
                    title: '–ì–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-3/5.jpg',
                    title: '–ì–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-3/6.jpg',
                    title: '–ì–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç'
                }
            ],
            date: '15.12.2024'
        },
         {
            id: 'balcony-4',
            title: '–õ–æ–¥–∂–∏—è –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª–∏—Ü–∞ –¢–µ—Å–ª—ã 28',
            description: '–ó–∞–º–µ—Ä –∏ –º–æ–Ω—Ç–∞–∂ —à–∫–∞—Ñ—á–∏–∫–∞ –¥–æ –ø–æ—Ç–æ–ª–∫–∞ –∏–∑ –õ–î–°–ü',
            previews: [
                'images/gallery/balcony-4/1.jpg',
                'images/gallery/balcony-4/2.jpg'
            ],
            media: [
                {
                    type: 'image',
                    url: 'images/gallery/balcony-4/1.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-4/2.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                },
                {
                    type: 'video',
                    url: 'images/gallery/balcony-4/3.mp4',
                    title: '–í–∏–¥–µ–æ-—Ç—É—Ä –ø–æ –±–∞–ª–∫–æ–Ω—É',
                    poster: 'images/gallery/balcony-4/1.jpg'
                }
            ],
            date: '15.12.2024'
        },
        {
            id: 'balcony-5',
            title: '–ë–∞–ª–∫–æ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª–∏—Ü–∞ –ì–∏–∫–∞–ª–æ 6',
            description: '–ö–æ–º–ø–ª–µ–∫—Å —Ä–∞–±–æ—Ç: –¥–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç–∞—Ä–æ–≥–æ —É—Ç–µ–ø–ª–∏—Ç–µ–ª—è, –º–æ–Ω—Ç–∞–∂ –Ω–æ–≤–æ–≥–æ –ø–æ–ª–∞ –∏–∑ –ª–∞–º–∏–Ω–∞—Ç–∞, –æ–±—à–∏–≤–∫–∞ —Å—Ç–µ–Ω –ü–í–• –ø–∞–Ω–µ–ª—è–º–∏',
            previews: [
                'images/gallery/balcony-5/1.jpg',
                'images/gallery/balcony-5/2.jpg'
            ],
            media: [
                {
                    type: 'image',
                    url: 'images/gallery/balcony-5/1.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-5/2.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-5/3.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-5/4.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                }
                
            ],
            date: '15.12.2024'
        },
        {
            id: 'balcony-6',
            title: '–ë–∞–ª–∫–æ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª–∏—Ü–∞ –¢–∏–∫–æ—Ü–∫–æ–≥–æ 22',
            description: '–ö–æ–º–ø–ª–µ–∫—Å —Ä–∞–±–æ—Ç –ø–æ –æ–±—à–∏–≤–∫–µ –±–∞–ª–∫–æ–Ω–∞ –ª–∞–º–∏–Ω–∞—Ç–æ–º',
            previews: [
                'images/gallery/balcony-6/1.jpg',
                'images/gallery/balcony-6/2.jpg'
            ],
            media: [
                {
                    type: 'image',
                    url: 'images/gallery/balcony-6/1.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-6/2.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-6/3.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-6/4.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-6/5.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                }
                
            ],
            date: '15.12.2024'
        },
        {
            id: 'balcony-8',
            title: '–ë–∞–ª–∫–æ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª–∏—Ü–∞ –£–±–æ—Ä–µ–≤–∏—á–∞ 160',
            description: '–ü–æ–ª–Ω–∞—è –æ—Ç–¥–µ–ª–∫–∞ –±–∞–ª–∫–æ–Ω–∞ –ª–∞–º–∏–Ω–∞—Ç–æ–º',
            previews: [
                'images/gallery/balcony-8/1.jpg',
                'images/gallery/balcony-8/2.jpg'
            ],
            media: [
                {
                    type: 'image',
                    url: 'images/gallery/balcony-8/1.jpg',
                    title: '–û–±—â–∏–π –≤–∏–¥ –±–∞–ª–∫–æ–Ω–∞'
                },
                {
                    type: 'image', 
                    url: 'images/gallery/balcony-8/2.jpg',
                    title: '–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è'
                },
                {
                    type: 'image',
                    url: 'images/gallery/balcony-8/3.jpg',
                    title: '–î–µ—Ç–∞–ª–∏ –æ—Ç–¥–µ–ª–∫–∏'
                },
                {
                    type: 'video',
                    url: 'images/gallery/balcony-8/4.mp4',
                    title: '–í–∏–¥–µ–æ-—Ç—É—Ä –ø–æ –±–∞–ª–∫–æ–Ω—É',
                    poster: 'images/gallery/balcony-7/1.jpg'
                }
            ],
            date: '15.12.2024'
        }
    ]
};

// –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏
let currentGalleryState = {
    currentFolder: null,
    currentMediaIndex: 0,
    currentMedia: []
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è fallback –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
function getFallbackImage(alt) {
    return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==';
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–∞–ª–µ—Ä–µ–∏
function initGallery() {
    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–∞–ª–µ—Ä–µ–∏...');
    
    const galleryContainer = document.getElementById('galleryFolders');
    if (!galleryContainer) {
        console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–∞–ª–µ—Ä–µ–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω!');
        return;
    }
    
    renderGalleryFolders();
    setupGalleryModal();
}

// –†–µ–Ω–¥–µ—Ä –ø–∞–ø–æ–∫ –≥–∞–ª–µ—Ä–µ–∏
function renderGalleryFolders() {
    const foldersContainer = document.getElementById('galleryFolders');
    
    if (!foldersContainer) {
        console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∞–ø–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
    }
    
    console.log('–†–µ–Ω–¥–µ—Ä–∏–º –ø–∞–ø–∫–∏ –≥–∞–ª–µ—Ä–µ–∏...');
    
    foldersContainer.innerHTML = galleryConfig.folders.map(folder => `
        <div class="gallery-folder" data-folder-id="${folder.id}">
            <div class="folder-preview">
                <div class="preview-images">
                    <img src="${folder.previews[0]}" alt="${folder.title}" 
                         class="preview-main"
                         onerror="this.src='${getFallbackImage(folder.title)}'">
                    <img src="${folder.previews[1]}" alt="${folder.title}" 
                         class="preview-secondary"
                         onerror="this.src='${getFallbackImage(folder.title)}'">
                </div>
            </div>
            <div class="folder-info">
                <h3 class="folder-title">${folder.title}</h3>
                <p class="folder-description">${folder.description}</p>
                <div class="folder-meta">
                    <span class="folder-count">${getMediaCountText(folder)}</span>
                </div>
            </div>
        </div>
    `).join('');
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–∞–ø–æ–∫
    const folderElements = document.querySelectorAll('.gallery-folder');
    console.log(`–ù–∞–π–¥–µ–Ω–æ –ø–∞–ø–æ–∫: ${folderElements.length}`);
    
    folderElements.forEach(folder => {
        folder.addEventListener('click', () => {
            const folderId = folder.getAttribute('data-folder-id');
            console.log('–ö–ª–∏–∫ –ø–æ –ø–∞–ø–∫–µ:', folderId);
            openFolderMediaGrid(folderId);
        });
    });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–µ–¥–∏–∞
function getMediaCountText(folder) {
    const imageCount = folder.media.filter(item => item.type === 'image').length;
    const videoCount = folder.media.filter(item => item.type === 'video' || item.type === 'youtube').length;
    
    if (videoCount > 0) {
        return `${imageCount} —Ñ–æ—Ç–æ, ${videoCount} –≤–∏–¥–µ–æ`;
    } else {
        return `${imageCount} —Ñ–æ—Ç–æ`;
    }
}

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≥–∞–ª–µ—Ä–µ–∏
function setupGalleryModal() {
    const modal = document.getElementById('galleryModal');
    if (!modal) {
        console.error('–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≥–∞–ª–µ—Ä–µ–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
        return;
    }
    
    // –°–æ–∑–¥–∞–µ–º –∫—Ä–µ—Å—Ç–∏–∫ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    let closeBtn = modal.querySelector('.modal-gallery-close');
    if (!closeBtn) {
        console.log('–°–æ–∑–¥–∞–µ–º –∫—Ä–µ—Å—Ç–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ');
        closeBtn = document.createElement('button');
        closeBtn.className = 'modal-gallery-close';
        closeBtn.innerHTML = '&times;';
        closeBtn.setAttribute('aria-label', '–ó–∞–∫—Ä—ã—Ç—å –≥–∞–ª–µ—Ä–µ—é');
        modal.querySelector('.modal-gallery-content').appendChild(closeBtn);
    }
    
    const prevBtn = modal.querySelector('.modal-gallery-prev');
    const nextBtn = modal.querySelector('.modal-gallery-next');
    
    if (closeBtn) {
        closeBtn.addEventListener('click', closeGalleryModal);
        console.log('–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫—Ä–µ—Å—Ç–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω');
    }
    
    if (prevBtn) {
        prevBtn.addEventListener('click', showPreviousMedia);
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', showNextMedia);
    }
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeGalleryModal();
        }
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeGalleryModal();
        }
        if (e.key === 'ArrowLeft' && modal.classList.contains('active')) {
            showPreviousMedia();
        }
        if (e.key === 'ArrowRight' && modal.classList.contains('active')) {
            showNextMedia();
        }
    });
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–µ—Ç–∫–∏ –º–µ–¥–∏–∞ –ø–∞–ø–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
function openFolderMediaGrid(folderId) {
    const folder = galleryConfig.folders.find(f => f.id === folderId);
    if (!folder) {
        console.error('–ü–∞–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:', folderId);
        return;
    }
    
    currentGalleryState.currentFolder = folder;
    currentGalleryState.currentMedia = folder.media;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    const titleElement = document.getElementById('modalFolderTitle');
    if (titleElement) {
        titleElement.textContent = folder.title;
    }
    
    // –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Å–µ—Ç–∫–∏
    const nav = document.querySelector('.modal-gallery-nav');
    if (nav) {
        nav.style.display = 'none';
    }
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
    const counter = document.querySelector('.modal-gallery-counter');
    if (counter) {
        counter.style.display = 'none';
    }
    
    // –û–¢–ö–õ–Æ–ß–ê–ï–ú –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–´–ô –†–ï–ñ–ò–ú –î–õ–Ø –°–ï–¢–ö–ò
    disableFullscreenMode();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ—Ç–∫—É –º–µ–¥–∏–∞
    showMediaGrid();
    
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    const modal = document.getElementById('galleryModal');
    if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
}

// –ü–æ–∫–∞–∑ —Å–µ—Ç–∫–∏ –º–µ–¥–∏–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
function showMediaGrid() {
    const imageContainer = document.querySelector('.modal-gallery-image-container');
    if (!imageContainer) return;
    
    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    imageContainer.innerHTML = '';
    
    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–µ—Ç–∫–∏
    const gridContainer = document.createElement('div');
    gridContainer.className = 'media-grid-container';
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –º–µ–¥–∏–∞ –≤ —Å–µ—Ç–∫—É
    gridContainer.innerHTML = currentGalleryState.currentMedia.map((media, index) => `
        <div class="media-grid-item" data-media-index="${index}">
            ${media.type === 'image' ? `
                <img src="${media.url}" alt="${media.title}" 
                     onerror="this.src='${getFallbackImage(media.title)}'">
                <div class="media-grid-overlay">
                    <span class="media-type-icon">üì∑</span>
                </div>
            ` : media.type === 'video' ? `
                <img src="${media.poster || media.url}" alt="${media.title}" 
                     onerror="this.src='${getFallbackImage(media.title)}'">
                <div class="video-badge">üé• –í–ò–î–ï–û</div>
                <div class="media-grid-overlay">
                    <span class="play-icon">‚ñ∂</span>
                </div>
            ` : media.type === 'youtube' ? `
                <img src="https://img.youtube.com/vi/${getYouTubeId(media.url)}/hqdefault.jpg" 
                     alt="${media.title}">
                <div class="video-badge">üì∫ YOUTUBE</div>
                <div class="media-grid-overlay">
                    <span class="play-icon">‚ñ∂</span>
                </div>
            ` : ''}
        </div>
    `).join('');
    
    imageContainer.appendChild(gridContainer);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–µ—Ç–∫–∏
    const mediaItems = gridContainer.querySelectorAll('.media-grid-item');
    mediaItems.forEach(item => {
        item.addEventListener('click', (e) => {
            e.stopPropagation();
            const mediaIndex = parseInt(item.getAttribute('data-media-index'));
            console.log('–ö–ª–∏–∫ –ø–æ –º–µ–¥–∏–∞ –≤ —Å–µ—Ç–∫–µ:', mediaIndex);
            openSingleMedia(mediaIndex);
        });
    });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è ID –∏–∑ YouTube URL
function getYouTubeId(url) {
    const match = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
    return match ? match[1] : null;
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –º–µ–¥–∏–∞ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
function openSingleMedia(mediaIndex) {
    currentGalleryState.currentMediaIndex = mediaIndex;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
    const nav = document.querySelector('.modal-gallery-nav');
    if (nav) {
        nav.style.display = 'flex';
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
    const counter = document.querySelector('.modal-gallery-counter');
    if (counter) {
        counter.style.display = 'block';
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –º–µ–¥–∏–∞
    showMediaByIndex(mediaIndex);
    
    // –í–ö–õ–Æ–ß–ê–ï–ú –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–´–ô –†–ï–ñ–ò–ú –î–õ–Ø –í–°–ï–• –û–î–ò–ù–û–ß–ù–´–• –ú–ï–î–ò–ê (–§–û–¢–û –ò –í–ò–î–ï–û)
    enableFullscreenMode();
}

// –ü–æ–∫–∞–∑ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –º–µ–¥–∏–∞ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
function showMediaByIndex(index) {
    if (!currentGalleryState.currentMedia.length) return;
    
    const imageContainer = document.querySelector('.modal-gallery-image-container');
    const currentImageElement = document.getElementById('currentImage');
    const totalImagesElement = document.getElementById('totalImages');
    
    if (!imageContainer) return;
    
    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    imageContainer.innerHTML = '';
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
    if (currentImageElement) {
        currentImageElement.textContent = index + 1;
    }
    if (totalImagesElement) {
        totalImagesElement.textContent = currentGalleryState.currentMedia.length;
    }
    
    const currentMedia = currentGalleryState.currentMedia[index];
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    showLoadingIndicator();
    
    // –°–û–ó–î–ê–ï–ú –≠–õ–ï–ú–ï–ù–¢ –í –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –û–¢ –¢–ò–ü–ê –ú–ï–î–ò–ê
    if (currentMedia.type === 'video') {
        createVideoElement(currentMedia, imageContainer);
    } else if (currentMedia.type === 'youtube') {
        createYouTubeElement(currentMedia, imageContainer);
    } else {
        createImageElement(currentMedia, imageContainer);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å
    currentGalleryState.currentMediaIndex = index;
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–µ–æ —ç–ª–µ–º–µ–Ω—Ç–∞ - –ò–ó–ú–ï–ù–ï–ù–ê –î–õ–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
function createVideoElement(media, container) {
    const video = document.createElement('video');
    video.controls = true;
    video.autoplay = true;
    
    // –î–õ–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
    const modal = document.getElementById('galleryModal');
    if (modal && modal.classList.contains('fullscreen-mode')) {
        video.style.width = '100%';
        video.style.height = '100%';
        video.style.maxWidth = '100%';
        video.style.maxHeight = '100%';
        video.style.objectFit = 'contain';
        video.style.borderRadius = '0';
        video.style.boxShadow = 'none';
    } else {
        video.style.maxWidth = '90%';
        video.style.maxHeight = '90%';
        video.style.borderRadius = '8px';
        video.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.1)';
    }
    
    if (media.poster) {
        video.poster = media.poster;
    }
    
    const source = document.createElement('source');
    source.src = media.url;
    source.type = 'video/mp4';
    
    video.appendChild(source);
    video.addEventListener('loadeddata', hideLoadingIndicator);
    video.addEventListener('error', () => {
        hideLoadingIndicator();
        container.innerHTML = `<div style="color: #666; text-align: center;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ</div>`;
    });
    
    container.appendChild(video);
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è YouTube —ç–ª–µ–º–µ–Ω—Ç–∞ - –ò–ó–ú–ï–ù–ï–ù–ê –î–õ–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
function createYouTubeElement(media, container) {
    const iframe = document.createElement('iframe');
    iframe.src = media.url;
    
    // –î–õ–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
    const modal = document.getElementById('galleryModal');
    if (modal && modal.classList.contains('fullscreen-mode')) {
        iframe.width = '100%';
        iframe.height = '100%';
        iframe.style.borderRadius = '0';
        iframe.style.boxShadow = 'none';
    } else {
        iframe.width = '800';
        iframe.height = '450';
        iframe.style.borderRadius = '8px';
        iframe.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.1)';
    }
    
    iframe.frameBorder = '0';
    iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
    iframe.allowFullscreen = true;
    
    iframe.addEventListener('load', hideLoadingIndicator);
    
    container.appendChild(iframe);
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
function createImageElement(media, container) {
    const img = new Image();
    img.className = 'modal-gallery-image';
    
    // –î–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —É–±–∏—Ä–∞–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    const modal = document.getElementById('galleryModal');
    if (modal && modal.classList.contains('fullscreen-mode')) {
        img.style.maxWidth = '100%';
        img.style.maxHeight = '100%';
        img.style.width = 'auto';
        img.style.height = 'auto';
        img.style.objectFit = 'contain';
        img.style.borderRadius = '0';
        img.style.boxShadow = 'none';
    } else {
        // –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –æ—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏
        img.style.maxWidth = '95%';
        img.style.maxHeight = '95%';
        img.style.objectFit = 'contain';
        img.style.borderRadius = '8px';
        img.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.1)';
    }
    
    img.onload = function() {
        hideLoadingIndicator();
        if (this.width > 2000 || this.height > 2000) {
            this.style.maxWidth = '90%';
            this.style.maxHeight = '90%';
        }
    };
    
    img.onerror = function() {
        hideLoadingIndicator();
        this.src = getFallbackImage(media.title || currentGalleryState.currentFolder.title);
    };
    
    img.src = media.url;
    img.alt = media.title || `${currentGalleryState.currentFolder.title} - –ú–µ–¥–∏–∞ ${currentGalleryState.currentMediaIndex + 1}`;
    
    container.appendChild(img);
}

// –í–ö–õ–Æ–ß–ï–ù–ò–ï –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê –î–õ–Ø –í–°–ï–• –û–î–ò–ù–û–ß–ù–´–• –ú–ï–î–ò–ê
function enableFullscreenMode() {
    const modal = document.getElementById('galleryModal');
    if (!modal) return;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    modal.classList.add('fullscreen-mode');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    const content = modal.querySelector('.modal-gallery-content');
    if (content) {
        content.style.width = '100vw';
        content.style.height = '100vh';
        content.style.maxWidth = 'none';
        content.style.maxHeight = 'none';
        content.style.margin = '0';
        content.style.borderRadius = '0';
    }
    
    const imageContainer = modal.querySelector('.modal-gallery-image-container');
    if (imageContainer) {
        imageContainer.style.width = '100%';
        imageContainer.style.height = '100%';
        imageContainer.style.padding = '0';
        imageContainer.style.display = 'flex';
        imageContainer.style.alignItems = 'center';
        imageContainer.style.justifyContent = 'center';
    }
    
    // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
    const header = modal.querySelector('.modal-gallery-header');
    if (header) {
        header.style.display = 'none';
    }
    
    console.log('‚úÖ –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –º–µ–¥–∏–∞');
}

// –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
function disableFullscreenMode() {
    const modal = document.getElementById('galleryModal');
    if (!modal) return;
    
    modal.classList.remove('fullscreen-mode');
    
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏
    const content = modal.querySelector('.modal-gallery-content');
    if (content) {
        content.style.width = '';
        content.style.height = '';
        content.style.maxWidth = '';
        content.style.maxHeight = '';
        content.style.margin = '';
        content.style.borderRadius = '';
    }
    
    const imageContainer = modal.querySelector('.modal-gallery-image-container');
    if (imageContainer) {
        imageContainer.style.width = '';
        imageContainer.style.height = '';
        imageContainer.style.padding = '';
        imageContainer.style.display = '';
        imageContainer.style.alignItems = '';
        imageContainer.style.justifyContent = '';
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—Ä–∞—Ç–Ω–æ
    const header = modal.querySelector('.modal-gallery-header');
    if (header) {
        header.style.display = '';
    }
    
    console.log('‚ùå –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –æ—Ç–∫–ª—é—á–µ–Ω');
}

// –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
function showLoadingIndicator() {
    const container = document.querySelector('.modal-gallery-image-container');
    if (!container) return;
    
    hideLoadingIndicator();
    
    const loaderHTML = `
        <div class="gallery-loader" style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1001;
            color: #666;
            text-align: center;
        ">
            <div class="loader" style="
                width: 50px;
                height: 50px;
                border: 3px solid rgba(0,0,0,0.1);
                border-top: 3px solid #666;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto 10px;
            "></div>
            –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>
    `;
    
    container.insertAdjacentHTML('beforeend', loaderHTML);
}

function hideLoadingIndicator() {
    const loader = document.querySelector('.gallery-loader');
    if (loader) {
        loader.remove();
    }
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≥–∞–ª–µ—Ä–µ–∏
function closeGalleryModal() {
    const modal = document.getElementById('galleryModal');
    if (modal) {
        // –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú –í–°–ï –í–ò–î–ï–û –ü–ï–†–ï–î –ó–ê–ö–†–´–¢–ò–ï–ú
        stopAllVideos();
        
        modal.classList.remove('active');
        // –û—Ç–∫–ª—é—á–∞–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
        disableFullscreenMode();
    }
    document.body.style.overflow = '';
    currentGalleryState.currentFolder = null;
    currentGalleryState.currentMedia = [];
    currentGalleryState.currentMediaIndex = 0;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –≤–∏–¥–µ–æ
function stopAllVideos() {
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—ã—á–Ω—ã–µ –≤–∏–¥–µ–æ
    const videos = document.querySelectorAll('video');
    videos.forEach(video => {
        video.pause();
        video.currentTime = 0;
    });
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º YouTube –≤–∏–¥–µ–æ (—É–¥–∞–ª—è–µ–º iframe)
    const youtubeIframes = document.querySelectorAll('iframe[src*="youtube"]');
    youtubeIframes.forEach(iframe => {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º src —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        const src = iframe.src;
        iframe.src = '';
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º src –Ω–æ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º autoplay=0
        iframe.src = src.replace('autoplay=1', 'autoplay=0');
    });
    
    console.log('‚èπÔ∏è –í—Å–µ –≤–∏–¥–µ–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã');
}
// –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –º–µ–¥–∏–∞
function showPreviousMedia() {
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º
    stopAllVideos();
    
    if (currentGalleryState.currentMediaIndex > 0) {
        showMediaByIndex(currentGalleryState.currentMediaIndex - 1);
    } else {
        showMediaByIndex(currentGalleryState.currentMedia.length - 1);
    }
    
    // –û–ë–ù–û–í–õ–Ø–ï–ú –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–´–ô –†–ï–ñ–ò–ú –ü–†–ò –ù–ê–í–ò–ì–ê–¶–ò–ò
    enableFullscreenMode();
}

// –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –º–µ–¥–∏–∞
function showNextMedia() {
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º
    stopAllVideos();
    
    if (currentGalleryState.currentMediaIndex < currentGalleryState.currentMedia.length - 1) {
        showMediaByIndex(currentGalleryState.currentMediaIndex + 1);
    } else {
        showMediaByIndex(0);
    }
    
    // –û–ë–ù–û–í–õ–Ø–ï–ú –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–´–ô –†–ï–ñ–ò–ú –ü–†–ò –ù–ê–í–ò–ì–ê–¶–ò–ò
    enableFullscreenMode();
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
document.addEventListener('DOMContentLoaded', initGallery);